function autocomplete(e,t,n){var i;function a(e){return"<mark>"+e+"</mark>"}function l(e){if(!e)return!1;(function e(t){for(var n=0;n<t.length;n++)t[n].classList.remove("autocomplete-active")})(e),i>=e.length&&(i=0),i<0&&(i=e.length-1),e[i].classList.add("autocomplete-active")}function o(t){for(var n=document.getElementsByClassName("autocomplete-items"),i=0;i<n.length;i++)t!=n[i]&&t!=e&&n[i].parentNode.removeChild(n[i])}e.addEventListener("input",function(e){var l,r,c=this.value;if(o(),!c)return!1;c=c.toLowerCase(),i=-1,(l=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),l.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(l);let s=new Set;for(let u of Object.keys(t))if(u.includes(c))for(let d of t[u]){if(s.has(d))continue;s.add(d),r=document.createElement("DIV");let f=n[d].title.replace(c,a(c)),m=c.charAt(0).toUpperCase()+c.slice(1);f=f.replace(m,a(m)),r.innerHTML+='<a href="/'+n[d].url+'">'+f+"</a>",r.innerHTML+="<input type='hidden' value='/"+n[d].url+"'>",r.addEventListener("click",function(e){window.location.href=this.getElementsByTagName("input")[0].value,o()}),l.appendChild(r)}}),e.addEventListener("keydown",function(e){var t=document.getElementById(this.id+"autocomplete-list");t&&(t=t.getElementsByTagName("div")),40==e.keyCode?(i++,l(t)):38==e.keyCode?(i--,l(t)):13==e.keyCode&&(e.preventDefault(),i>-1&&t&&t[i].click())}),document.addEventListener("click",function(e){o(e.target)})}